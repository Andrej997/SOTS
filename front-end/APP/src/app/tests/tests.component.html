

<div class='container'>
    <form [formGroup]="testForm" (ngSubmit)="onFirstSubmit()">
        <div class="card">
            <div class="form-group">
                <span>Test name</span>
                <input type="email" formControlName="name" class="form-control" aria-describedby="emailHelp" placeholder="Test name">
                <!-- <small id="emailHelp" class="form-text text-muted">The name of the test.</small> -->
            </div>
    
            <div class="form-group">
                <span>Subject</span>
                <select class="form-control"  formControlName="subject">
                    <option *ngFor="let subject of subjects" [value]="subject.id">{{ subject.name }}</option>
                </select>
            </div>
        </div>

        <div class="form-group card">
            <button type="button" (click)="addQuestion()" class="btn btn-primary">Add question</button> <br>
            <div *ngFor="let question of questions">
                <span><span>Question {{question.question_id}}</span> <button type="button" (click)="addAnswer(question.question_id)" class="btn btn-primary" style="float: right;">Add answer</button></span>
                <input type="text" class="form-control" placeholder="Question text" (change)='addQuestionText($event, question.question_id)'>
                <br>
                
                <div class="form-group container-sm">
                    <div *ngFor="let answer of question.Answers">
                        <span>Answer {{answer.answer_id}}</span>
                        <input type="text" class="form-control" placeholder="Answer {{answer.id}} text" (change)='addAnswerText($event, question.question_id, answer.answer_id)'>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" (change)='setCorrectAnswer(question.question_id, answer.answer_id)'>
                            <label class="form-check-label">Is correct</label>
                        </div>
                    </div>
                </div>
                <hr>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
</div>
